# Claude Code 开发人员入职手册：PSB 系统实战指南

\--------------------------------------------------------------------------------

### **1.0 引言：告别低效，拥抱系统化AI编程**

过去，许多人启动 Claude Code 项目的方式都存在根本性的错误。我们直接在终端输入命令，然后开始“自由式提示”，没有任何计划、设置或系统化的构建流程。这就像试图在没有蓝图的情况下盖房子——虽然最终可能也能建成一些东西，但过程往往是混乱、低效的，并且充满了本可以避免的问题。

为应对这些挑战，业界沉淀出了一套行之有效的PSB（计划、设置、构建）三阶段系统。实践证明，该系统能让项目从第一天起就变得“10倍更容易”，它将AI辅助编码从一种充满不确定性的尝试，转变为一个可预测、高效且可扩展的专业流程。

本手册的目标，就是为开发人员提供一个清晰的分步指南，帮助您将PSB系统有效地整合到日常工作流程中，从而节省数月的挫败感和时间浪费。

现在，让我们从奠定成功基石的第一阶段开始：计划。

\--------------------------------------------------------------------------------

### **2.0 第一阶段：计划 (Plan) - 成功的基石**

计划阶段是项目的战略核心。许多开发者急于编码，但请相信，前期投入短短15分钟进行规划，将为您节省数小时甚至数天的挫败感。一个周密的计划能为项目成功奠定坚实的基础，确保Claude能够按照您的确切意图进行构建。

### **2.1 明确项目方向：两个核心问题**

在编写任何代码之前，您必须清晰地回答两个核心问题，它们的答案将决定项目的整个方法论。

1. “你到底想做什么？” (项目目标)
   - **定义:** 这个问题的核心是明确项目的最终目标。您是想学习一项新技术？验证一个商业想法？构建一个产品的alpha版本？还是仅仅制作一个原型来探索可能性？
   - **影响:** 不同的目标对项目有截然不同的要求。例如，如果只是为了验证一个想法的原型，您可以专注于核心功能，不必担心代码是否达到生产级别或是否覆盖了所有边缘情况，从而可以快速行动、快速试错。但如果您要构建一个交付给真实用户的产品，那么安全性、错误处理、边缘情况以及所有能让产品显得精致的细节都至关重要。您越清晰，Claude就越能理解您的意图并相应地进行构建。
2. “你想要的功能里程碑是什么？” (项目阶段)
   - **定义:** 将庞大的项目分解为清晰的、可管理的阶段。版本一应该实现什么？哪些功能可以推迟到后续版本？
   - **方法:** 对大多数项目而言，采用MVP（Minimum Viable Product，最小可行产品）的思路是最高效的。首先定义验证核心概念所需的绝对最小功能集作为MVP。然后，在未来的版本中，您可以逐步添加“脚手架、润色或优化”等改进内容。这种分阶段的方法能让您保持专注，并为每个阶段设立明确的完成目标。

### **2.2 借助AI进行高效规划**

当您有了初步构想后，AI可以成为您规划过程中的强大盟友，帮助您深化思考、发现盲点。

- **让AI提问 (Invert the Interaction):** 这是最高效的AI辅助规划技巧，也是一种思维模式的转变。不要只把AI当作执行者，而要把它当作战略伙伴。将您的初步构想（brainstorm）提供给Claude，然后要求它提出关键问题。例如，您可以这样提问：“*嘿，Claude，我想构建这个项目。为了成功构建一个MVP，我需要回答哪三个最重要的问题？*” Claude会提出一些澄清性问题，帮助您发现那些尚未考虑周全的环节或需要做出的决策。
- **语音对话:** 在想法尚不清晰的初期阶段，书面表达可能会很困难。此时，与Claude Assistant或ChatGPT进行语音对话是一个极佳的选择。您可以口头阐述您的项目想法、功能设计和用户流程。对话结束后，要求AI将内容总结成一个结构化的Markdown文件，作为您与Claude Code协作的起点。

### **2.3 核心产出：撰写项目规约文档**

计划阶段的主要交付物是一份**项目规约文档 (Project Spec Doc)**。它轻量级地结合了产品需求（PRD）和工程设计（EDD），是确保Claude Code能够成功构建项目的关键输入。

#### **2.3.1 产品需求 (What & Why)**

产品需求部分旨在回答三个核心问题：*产品为谁而设？* *它解决了什么问题？* *产品应该做什么？*

- **强调具体性:** 模糊的需求会导致不可预测的结果。不要只说“用户可以创建日记”，而要具体描述用户体验。例如：*他们是以空白页开始还是以提示开始？他们可以添加照片吗？他们能否编辑过去的条目？* 您对用户交互的描述越具体，Claude构建出的功能就越贴近您的设想。
- 专业建议:
  1. **分解里程碑:** 将项目分解为清晰的功能里程碑，并为每个里程碑定义明确的“完成”标准。
  2. **迭代需求:** 如果您不确定所有需求，没关系。先构建版本一，然后根据实际产出和感受来迭代和规划版本二的需求。

#### **2.3.2 技术需求 (How)**

技术需求部分关注的是*如何构建*项目。如果您不明确指定技术栈，Claude可能会做出不符合您期望或团队规范的选择。

- 技术栈选择:

   明确指定您希望使用的编程语言、框架和各项服务。这至关重要。以下是一个推荐的Web应用技术栈示例，您可以根据项目需求进行调整：

  - 前端:
    - 托管: Vercel
    - 框架: Next.js
    - 样式: Tailwind CSS
    - 组件: Shadcn
  - **后端与数据库:** MongoDB 或 Supabase
  - **认证:** Clerk
  - **支付:** Stripe
  - **邮件:** Resend
  - **后端托管 (如需):** Digital Ocean
  - **对象存储:** Cloudflare R2
  - **AI 功能:** Anthropic 模型, Google Gemini (图像)
  - *关键在于对您的选择保持清晰，而不是必须使用这个特定组合。*

- **如果您不确定技术选型怎么办？** 利用AI本身来解决这个问题。向Claude描述您的产品需求，并要求它生成一份包含不同技术方案及其优缺点的研究报告。Claude内置的网络搜索功能可以为您提供基于最新信息的明智建议。

- **技术架构定义:** 此部分包括系统设计概览、关键组件的交互方式、数据库模式和API设计等。通常，您可以将大部分工作委托给Claude来定义。但在团队环境中，您可能需要更具规范性，以确保其遵循团队的最佳实践。

- **基础设施准备:** 在开始构建之前，就应完成相关基础设施的配置工作。创建您的数据库、设置好托管服务、生成所需的API密钥。提前完成这些准备工作，能让Claude在构建阶段畅通无阻。

当项目规约文档完成后，您的项目就已经做好了充分的准备，可以进入下一个阶段了。

\--------------------------------------------------------------------------------

### **3.0 第二阶段：设置 (Setup) - 配置高效的开发环境**

设置阶段的目标是将您的Claude Code实例配置成一个“调校完美的乐器”，为其配备成功构建项目所需的所有快捷方式、自动化和上下文。这能极大地提升后续的开发效率。

### **3.1 七步设置清单**

以下是为每个新项目推荐的七步设置清单：

1. 设置 GitHub 仓库

   - **是什么:** 为您的项目创建一个GitHub仓库，而不是仅在本地使用Git。
   - 为什么重要:
     - **跨平台编码:** 使您能够在Web和移动端使用Claude Code。
     - **启用高级功能:** 可以使用GitHub CLI和Claude Code的GitHub Action（例如，用于自动PR审查）。
     - **简化部署:** 许多基础设施提供商（如Vercel）支持通过连接GitHub仓库直接部署，并为每个分支提供预览。
     - **奠定工作流基础:** 为“基于问题驱动的开发”这一高效工作流提供基础。
     - **支持里程碑开发:** 与计划阶段定义的项目里程碑（2.1节）相结合，可以为每个里程碑或主要功能创建一个独立分支，确保主干代码的稳定性，这对于迭代开发至关重要。

2. 创建环境变量文件 (.env)

   - **是什么:** 一个存储API密钥、数据库连接字符串等敏感信息的文件。
   - **如何操作:** 首先，请求Claude根据您的项目规约和技术栈创建一个示例`.env`文件。然后，您再手动填充所有必要的凭证，这样Claude在构建时就不必停下来向您索要。

3. 配置 

   ```
   claude.md
   ```

    文件

   - **是什么:** 将其视为“项目的记忆”。该文件中的内容会在每次与Claude Code的交互中被包含在上下文中。
   - 为什么重要:
     - **保持简洁:** 上下文窗口是宝贵的计算资源。过度臃肿的 `claude.md` 会稀释关键指令的权重，可能导致AI在执行任务时偏离核心目标或遗忘重要约束。因此，应专注于提供高信噪比的核心信息。
     - 建议内容:
       - 项目目标和架构概览。
       - 设计风格指南和用户体验准则。
       - 约束与策略（例如，“绝不直接推送到main分支”，“敏感信息必须使用环境变量”）。
       - 仓库礼仪（例如，分支命名规范、PR流程）。
       - 常用命令（例如，构建和测试命令）。
     - **专业技巧:** 为了保持`claude.md`的简洁，可以链接到其他文档文件（如项目规约文档、`architecture.md`），并指示Claude在需要时参考它们。

4. 建立自动化文档

   - **是什么:** 一组独立于`claude.md`的文档，用于维护项目的动态上下文，并由Claude在工作时自动更新。
   - 核心文档推荐:
     - `architecture.md`: 记录系统设计、应用结构和主要组件的交互方式。
     - `changelog.md`: 按时间顺序跟踪项目的所有重要变更。
     - `project_status.md`: 涵盖项目里程碑、已完成的工作以及上次开发中断的位置，便于快速恢复工作。
     - **功能参考文档:** 为关键功能提供高层次的概述和实现细节。
   - **如何实现:** 在`claude.md`中添加指令，或创建一个自定义命令，让Claude在完成一项功能后自动更新这些文档。

5. 设置插件 (Plugins)

   - **是什么:** 插件通过专业的命令和工作流来扩展Claude Code的功能，让开发更快、更容易。
   - 推荐插件:
     - **Anthropic 前端插件:** 专为前端开发优化，能生成更优质的UI。
     - **Anthropic 功能开发插件:** 帮助简化和规范新功能的开发流程。
     - **Every Compound 工程插件:** 提供一套丰富的命令和子代理，旨在让项目开发能力持续进化。

6. 配置 MCPs (模型上下文协议服务器)

   - **是什么:** MCPs是连接Claude Code与外部工具（如数据库、前端测试工具、部署平台）的集成。

   - 推荐配置:

      根据您在计划阶段选择的技术栈，配置相应的MCPs。例如：

     - **MongoDB MCP** 或 **Supabase MCP:** 允许Claude直接与数据库交互，自动更新模式。
     - **Playwright MCP:** 使Claude能够“看到”您的Web应用并自动执行用户流程测试。
     - **Vercel MCP:** 用于自动化部署。

7. 配置斜杠命令和子代理 (Slash Commands & Subagents)

   - **核心区别:** **斜杠命令**使用主对话的上下文；而**子代理**则使用一个“分叉”出来的独立上下文，非常适合并行工作或需要高度专注的任务。
   - 建议:
     - 子代理:
       - **内置:** 充分利用内置的“规划”和“代码库搜索”子代理。
       - **自定义:** 创建如“变更日志子代理”（更新`changelog.md`）、“前端测试子代理”（运行Playwright测试）和“复盘代理”（在开发会话结束后总结经验并更新`claude.md`）等。
     - 斜杠命令:
       - **插件提供:** 使用Anthropic插件提供的 `/commit` 等实用命令。
       - **自定义:** 创建如“更新所有项目文档”或“根据输入创建GitHub Issues”的命令，以实现工作流自动化。

### **3.2 进阶技巧：实现深度自动化**

1. **预配置权限与设置:** 在设置中预先批准或阻止某些命令（如git命令、文件编辑），可以避免Claude在执行任务时因等待权限而中断，从而实现更流畅的无人值守工作流。

2. 设置钩子 (Hooks):

    钩子是在Claude Code生命周期的特定点（如工具调用前、任务完成后）自动运行的脚本。

   - 示例:
     - **停止钩子 (Stop Hook):** 在Claude完成任务后自动运行测试。如果测试失败，钩子会指示Claude继续修复问题。
     - **通知钩子 (Notification Hook):** 当Claude需要权限时，通过Slack等工具向您发送通知，这样您就不必时刻守在终端前。

完成这些设置后，Claude已万事俱备，准备好进入最终的构建阶段。

\--------------------------------------------------------------------------------

### **4.0 第三阶段：构建 (Build) - 从 MVP 到完整功能**

进入构建阶段，拥有正确的工作流与计划和设置阶段同样重要。它决定了您的开发过程是顺畅无阻，还是充满挫败。

### **4.1 从 MVP 开始**

现在，您可以将计划阶段完成的项目规约文档交给Claude，并命令它开始构建第一个里程碑（即MVP）。

- **专业技巧:** 在下达指令时，要求Claude尽可能使用**并行子代理**以加快开发速度，并始终提醒它首先使用**“计划模式”(plan mode)**。计划模式能让Claude在动手之前，先将您的需求分解为详细的实现步骤，这会带来质量更高的结果。

### **4.2 三大核心开发工作流**

根据任务的性质，您可以选择以下三种工作流之一：

1. 通用工作流 (General Workflow)
   - **适用场景:** 开发单个功能的标准端到端流程。
   - 流程:
     1. **研究 (Research):** (可选) 对于需要引入新技术或API的复杂功能，可以先让Claude进行研究并生成报告。
     2. **计划 (Plan):** 这是最重要的一步。始终使用“计划模式”，让Claude思考任务、分解步骤并提出澄清性问题。
     3. **实现 (Implement):** Claude将利用您在设置阶段配置好的所有工具（插件、MCPs、命令）来编写代码。
     4. **测试 (Test):** 验证功能的正确性。
2. 基于问题驱动的工作流 (Issue-Based Workflow)
   - **适用场景:** 保持项目整洁、有序，并进行并行开发。
   - **核心理念:** 将GitHub Issues作为功能、任务和错误的“唯一真实来源”。您不再是简单地通过提示来驱动开发，而是创建具体的Issue，然后指示Claude去解决它们。
   - 优点:
     - **组织性:** 所有待办事项都集中在GitHub，而不是散落在多个`TODO`文件中。
     - **并行化:** 可以轻松地让多个Claude实例或子代理同时处理不同的Issue。
   - **专业技巧:** 您可以要求Claude Code帮助您将项目规约文档自动转化为一系列的GitHub Issues。
3. 多代理工作流 (Multi-Agent Workflow)
   - **适用场景:** 最先进的工作流，允许多个Claude Code实例同时处理不同的复杂功能。
   - **关键技术:** `git worktrees`。该技术允许您在不同的目录中拥有同一个仓库的多个工作副本，每个副本都处于不同的分支上。
   - **工作方式:** 每个Claude Code会话都在其专属的`worktree`中运行，这意味着它们操作的是物理上隔离的文件目录，从而彻底避免了文件冲突。然而，所有`worktree`共享同一个底层的`.git`数据库，因此它们的提交历史、分支和标签是互通的。当各个功能开发完成后，您可以将这些`worktree`合并回主分支或一个集成的功能分支。

### **4.3 保持高效的四个关键技巧**

在构建过程中，遵循以下四个技巧可以让您的生产力最大化：

1. 尽可能使用最佳模型

   - **原则:** 使用更强大的模型（如Opus 4.5）所节省的时间价值，远高于因使用更便宜模型而节省的成本。一个更强大的模型犯错更少，意味着您修复问题的时间也更少。
   - 建议:
     - **Opus:** 用于规划和处理复杂任务。
     - **Sonnet:** 作为实现功能的主力模型。
     - **Haiku:** 用于简单、直接的任务和Bug修复。

2. 定期更新和调整 

   ```
   claude.md
   ```

   - **原则:** `claude.md`文件是一个动态文档，应随着项目的进展而演进。当您添加新功能或达到新里程碑时，应更新它。
   - **专业技巧:** 创建一个自定义斜杠命令，在执行git提交时，自动提示并帮助您更新`claude.md`，以确保文档与代码同步。

3. 实践回归预防

   - **原则：动态学习，杜绝重蹈覆辙。** 当您发现Claude犯了一个错误时，您的目标不应仅仅是修复它，而是要将这次修正转化为系统的永久性知识。
   - **操作:** 使用 `#` 指令向Claude提供修正措施。这个操作会自动将您的指令整合到相关的`claude.md`文件中，从而实现动态学习，防止未来再次犯同样的错误。

4. 不畏惧推倒重来

   - **原则:** 记住，“代码是廉价的”，尤其是在原型阶段。如果发现某个方向行不通，不要害怕放弃、回滚并重新开始。这通常比在错误的方向上投入更多时间更有效率。
   - **工具:** Claude Code的“检查点”(Checkpoints)和“倒带”(Rewind)功能在此时非常有用，它们提供了会话级别的恢复能力，是对git版本控制的有力补充。

\--------------------------------------------------------------------------------

### **5.0 结论：系统化思维，持续进化**

PSB（计划、设置、构建）系统提供了一个强大的框架，它将AI辅助编码从随机、零散的尝试，转变为一个可预测、高效且可扩展的标准化流程。通过系统化的思维，您可以充分释放Claude Code的潜力，将AI真正打造为您的得力编程伙伴。

请将本手册作为您的起点，并在实践中不断调整和完善属于您自己的工作流。掌握与AI协作编程的艺术，是一个持续进化的过程，而您已经迈出了最关键的一步。
